{% extends "exdb/base.html" %}
{% load i18n %}
{% load staticfiles %}
{% block css %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'exdb/css/edit_experience.css' %}" />
{% endblock %}
{% block javascript %}
    {{ block.super }}
    <script type="text/javascript" src="{% static 'exdb/js/experience_form.js' %}"></script>
{% endblock %}
{% block content %}
    {{ block.super }}
    <h1>{% trans "Edit Experience" %}</h1>
    <p><a href="{% url 'home' %}">{% trans "Back to Home" %}</a></p>
    {% if experience.status == 'ad' and not user.is_hallstaff %}
        <p class="warning">{% trans "Warning! Editing an approved experience will resubmit it for approval." %}</p>
    {% endif %}
    <div class="errors">{{ form.non_field_errors }}</div>
    <div class="errors">{{ new_comment_form.non_field_errors }}</div>
    <hr />
    <form method="POST">
        {% csrf_token %}
        {% for field in form %}
            <div>
                <p class="errors">{{ field.errors }}</p>
                {{ field.label_tag }}
                {{ field }}
                <span class="help">{{ field.help_text }}</span>
            </div>
        {% endfor %}
        <hr />
        {% if experience.status != 'ad' %}
            <input type="submit" value="{% trans "Save Changes" %}" name="save" />
        {% endif %}
        {% if experience.status != 'pe' %}
            <input
                type="submit"
                value=
                    {% if experience.status != 'dr' %}
                        {% trans "Re-Submit" %}
                    {% else %}
                        {% trans "Submit" %}
                    {% endif %}
                name="submit"
            />
        {% endif %}
        <div>
            <h3>{% trans "Comments" %}</h3>
            {% for comment in experience.comment_set.all %}
                <div>
                    <div>{{ comment.message }}</div>
                    <div class="comment-author">-{{ comment.author }} said on {{ comment.timestamp }}</div>
                </div>
            {% empty %}
                <div>{% trans "No comments" %}</div>
            {% endfor %}
        </div>
    </form>
{% endblock %}
