{% extends "exdb/base.html" %}
{% load i18n %}
{% load staticfiles %}
{% block css %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'exdb/css/experience_approval.css' %}" />
{% endblock %}
{% block javascript %}
    {{ block.super }}
    <script type="text/javascript" src="{% static 'exdb/js/experience_approval.js' %}"></script>
{% endblock %}
{% block content %}
    <form method="POST">
        {% csrf_token %}
        <h1>{% trans "Experience Approval" %}</h1>
        <p><a href="{% url 'hallstaff_dash' %}">{% trans "Return to Hall Staff Dashboard" %}</a></p>
        <div class="form-errors">{{ form.non_field_errors }}</div>
        <div class="form-errors">{{ comment_form.non_field_errors }}</div>
        <p>{% trans "Note: Set the 'Supervisor' field to the LLC approver if this experience needs LLC approval." %}</p>
        {% with object.edit_log.all.0 as last_edit %}
            {% if last_edit %}
                <p>Last edited: {{ last_edit.editor }} <span class="timestamp">{{ last_edit.timestamp }}</span></p>
            {% endif %}
        {% endwith %}
        <hr/>
        <div class="experience-display">
            {% for field in form %}
                <p>{{ field.errors }}</p>
                <div>
                    {{ field.label }}
                    {{ field }}
                    <span class="help">{{ field.help_text }}</span>
                </div>
            {% endfor %}
        </div>
        <hr/>
        <div>{% trans "Add Comment" %}:</div>
        <div class="form-errors">{{ comment_form.message.errors }}</div>
        <div>{{ comment_form.message.label }}{{ comment_form.message }}</div>
        <input type="submit" value="{% trans "deny" %}" name="deny" />
        <input type="submit" value="{% trans "approve" %}" name="approve" />
        <input type="submit" id="delete" value={% trans "delete" %} name="delete" />
        <div>
            <h3>{% trans "Comments" %}</h3>
            {% for comment in comments %}
                <div>
                    <div>{{ comment.message }}</div>
                    <div class="comment-author">-{{ comment.author }} said on {{ comment.timestamp }}</div>
                </div>
            {% empty %}
                <tr><td>{% trans "No comments" %}</td></tr>
            {% endfor %}
        </div>
    </form>
{% endblock %}
